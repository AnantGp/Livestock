# Pipeline Configuration
pipeline:
  # Model paths
  yolo_model: models/yolo/exp/weights/best.pt
  unet_model: models/unet/best.pth
  
  # CSV metadata
  metadata_csv: dataset.csv
  
  # Inference settings
  yolo_conf: 0.25
  yolo_iou: 0.45
  unet_threshold: 0.65
  
  # Image settings
  img_size: 640
  unet_img_size: 256

  # Optional refinement to reduce grass/background spill inside the YOLO crop
  # Uses GrabCut initialized from U-Net probabilities.
  grabcut_refine:
    enabled: true
    prob_low: 0.30
    prob_high: 0.70
    iterations: 3
    border: 10
    max_dim: 900
    fallback_threshold: 0.65

  # Segmentation mask cleanup (reduces green spill on background)
  mask_postprocess:
    enabled: true
    opening_kernel: 7
    opening_iterations: 2
    erode_kernel: 15
    erode_iterations: 3
    restore_dilate: true
    keep_largest_component: true
  
  # LLM settings
  llm:
    enabled: true
    model: Salesforce/blip-image-captioning-large
    device: auto  # auto, cpu, cuda, mps

output:
  save_visualizations: true
  save_masks: true
  save_reports: true
  output_dir: outputs
